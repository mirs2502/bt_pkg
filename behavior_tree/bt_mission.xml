<root main_tree_to_execute="MainTree">
    <TreeNodesModel>
        <Action ID="Wait">
            <input_port name="wait_duration"/>
        </Action>
        <Action ID="Spin">
            <input_port name="spin_dist"/>
        </Action>
        <Action ID="ScanAndCreatePolygon">
            <input_port name="node"/>
            <output_port name="area_polygon"/>
        </Action>
        <Action ID="GenerateCoveragePath">
            <input_port name="node"/>
            <input_port name="area_polygon"/>
            <output_port name="coverage_path"/>
        </Action>
        <Action ID="FollowPath">
            <input_port name="path"/>
            <input_port name="controller_id"/>
        </Action>
    </TreeNodesModel>

    <BehaviorTree ID="MainTree">
        <Sequence name="MainSequence">
            <Sequence name="SetupSequence">
                <Wait wait_duration="2"/> <Spin spin_dist="6.28"/> <ScanAndCreatePolygon node="{node}" area_polygon="{area_polygon}"/>
            </Sequence>
            
            <Sequence name="PlanSequence">
                <GenerateCoveragePath node="{node}" area_polygon="{area_polygon}" coverage_path="{waypoints}"/>
            </Sequence>
            
            <Fallback name="ExecuteFallback">
                <FollowPath path="{waypoints}" controller_id="FollowPath"/>
            </Fallback>
        </Sequence>
    </BehaviorTree>
</root>
